(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{119:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var o=n(3),a=(n(0),n(120));n(10);const r={id:"Custom",title:"Custom Call To Action",sidebar_label:"Custom Call To Action",slug:"/Custom"},i={unversionedId:"CTA/Custom",id:"CTA/Custom",isDocsHomePage:!1,title:"Custom Call To Action",description:"Occasionally, a dealer may not want one of the button styles from the styles provided in Apply,  Car Finance Check, Reserve. Another advantage of going the custom button route is that you can implement as many of these on a single page, without the embeddable widget merging all these into one location on the page. This is handy, if for instance, you would like a custom button on a stock listing page.",source:"@site/docs/CTA/Custom.mdx",slug:"/Custom",permalink:"/documentation/docs/Custom",editUrl:"https://github.com/ivendi-support/documentation-src/edit/master/documentation/docs/CTA/Custom.mdx",version:"current",sidebar_label:"Custom Call To Action",sidebar:"someSidebar",previous:{title:"Reserve",permalink:"/documentation/docs/Reserve"},next:{title:"Videos",permalink:"/documentation/docs/HP"}},l=[{value:"Getting Started",id:"getting-started",children:[]},{value:"URL",id:"url",children:[{value:"Quote ID",id:"quote-id",children:[]}]},{value:"Example",id:"example",children:[{value:"Generate the button",id:"generate-the-button",children:[]},{value:"Generate the link",id:"generate-the-link",children:[]},{value:"All together",id:"all-together",children:[]}]}],c={toc:l};function u({components:e,...t}){return Object(a.b)("wrapper",Object(o.a)({},c,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Occasionally, a dealer may not want one of the button styles from the styles provided in ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/documentation/docs/Apply"}),"Apply"),",  ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/documentation/docs/CFC"}),"Car Finance Check"),", ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/documentation/docs/Reserve"}),"Reserve"),". Another advantage of going the custom button route is that you can implement as many of these on a single page, without the embeddable widget merging all these into one location on the page. This is handy, if for instance, you would like a custom button on a stock listing page."),Object(a.b)("h2",{id:"getting-started"},"Getting Started"),Object(a.b)("p",null,"To create a custom call-to-action button you will need to be familiar with the Quoteware API, if you aren't, please go ahead and read the documentation, ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"/documentation/docs/"}),"here"),"."),Object(a.b)("h2",{id:"url"},"URL"),Object(a.b)("p",null,"To create a custom call to action you will need to generate a URL for the button that links to a quote, returned from the Quoteware API."),Object(a.b)("p",null,"The below link is the one that needs to be populated with the results from the Quoteware API:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-javascript"}),"var FINANCE_CHECK_LINK = 'https://my.newvehicle.com/start?quoteId=#QUOTEID&imageUrl=#IMAGEURL?width=350&returnUrl=#RETURNURL&redirectTo=#REDIRECTTO';\n")),Object(a.b)("p",null,"As you can see we have 4 parameters in the url. The parameters are:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"quoteID, used to identify which quote to use."),Object(a.b)("li",{parentName:"ol"},"imageURL, the url of the image of the vehicle to use"),Object(a.b)("li",{parentName:"ol"},"returnURL, Where should the user be returned to after completing the action."),Object(a.b)("li",{parentName:"ol"},"redirectTo, what CTA action should be used:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"For a Finance Check CTA use 'redirectTo=finance-check'"),Object(a.b)("li",{parentName:"ul"},"For an Apply CTA use 'redirectTo=apply'"),Object(a.b)("li",{parentName:"ul"},"For a Reserve CTA ise 'redirectTo=reserve-vehicle'")))),Object(a.b)("h3",{id:"quote-id"},"Quote ID"),Object(a.b)("p",null,"To generate the quoteID you will need to send a request to Quoteware, and then parse the response for the QuoteUID that you would like to use in the finance check. QuoteUID is in the Product Quote Group object in the response."),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"application/json")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-json",metastring:'{13} title="Partial Response"',"{13}":!0,title:'"Partial','Response"':!0}),'...\n},\n                  "FunderCode": "BLA",\n                  "FunderProductCode": "HP",\n                  "ParentQuoteUID": null,\n                  "ProductCode": "HP",\n                  "ProductName": "Blackhorse HP APR - Standard Rate",\n                  "ProductUID": "b644028d-c545-4a54-ba3a-004007009d3b",\n                  "CreditTier": "None",\n                  "QuotedDateTime": "/Date(1614772549066+0000)/",\n                  "QuoteeProductCode": "HP",\n                  "QuoteeUid": "268e8202-338e-4b26-a6fe-74bcdab0a357",\n                  "QuoteUID": "03031155-49f1-41f3-b332-5235d0263664",\n                  "WithinPaymentRange": "None",\n                  "Errors": null,\n                  "hasErrors": false,\n                  "hasWarnings": false,\n                  "Warnings": null\n                }\n...\n')),Object(a.b)("h2",{id:"example"},"Example"),Object(a.b)("p",null,"Please see the below, full example of how to generate a custom CTA for Finance Check"),Object(a.b)("h3",{id:"generate-the-button"},"Generate the button"),Object(a.b)("p",null,"First we need to create the button that we will attach the link to"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-html",metastring:'title="HTML"',title:'"HTML"'}),'\n<h1>\n  Custom Vehicle Finance Check Call to Action\n</h1>\n\n<a target="_blank" rel="noopener noreferrer" id="customFinanceCheckButton">\n  Free Finance Check\n</a>\n\n')),Object(a.b)("h3",{id:"generate-the-link"},"Generate the link"),Object(a.b)("p",null,"The following javascript shows the process of getting a quote from quoteware, parsing it for the quoteId and then changing the URL to use that quoteId."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="javascript"',title:'"javascript"'}),'function requestQuotationFromQuotewareV3(\n  username,\n  quoteeUid,\n  term,\n  deposit,\n  annualMileage,\n  vatIncluded,\n  vatQualifying,\n  vehicleCashPrice,\n  vehicleMileage,\n  vehicleCondition,\n  vehicleClass,\n  vehicleRegistrationMark,\n  vehicleIdentity, // The vehicle VRM or CAP Code\n  vehicleIdentityType, // \'VRM\' or \'RVC\' (CAP)\n  vehicleRegistrationDate,\n  vehicleStockIdentity,\n  vehicleStockLocation,\n  quoteResultCallback\n) {\n  var xhr = new XMLHttpRequest();\n\n  xhr.addEventListener("readystatechange", function () {\n    if (this.readyState === 4) {\n      let quoteResults = JSON.parse(this.responseText);\n\n      for (var i = 0; i < quoteResults.QuoteResults[0].Results.length; i++) {\n        let quoteResult = quoteResults.QuoteResults[0].Results[i];\n\n        quoteResultCallback(quoteResult);\n      }\n    }\n  });\n\n  xhr.open("POST", "https://quoteware3.ivendi.com/quotes");\n  xhr.setRequestHeader("Content-Type", "application/json");\n\n  xhr.send(`{\n    "Credentials": {\n      "Username": "${username}"\n    },\n    "QuoteRequests": [{\n      "QuoteeUID": "${quoteeUid}",\n      "GlobalRequestSettings": {\n        "AllowAdjustments": true\n      },\n      "GlobalRequestParameters": {\n        "Term": "${term}"\n      },\n      "Requests": [{\n        "Figures": {\n          "Asset": {\n            "AnnualDistance": "${annualMileage}",\n            "VATIncluded": ${vatIncluded},\n            "VATQualifying": ${vatQualifying}\n          },\n          "CashDeposit": "${deposit}",\n          "CashPrice": "${vehicleCashPrice}"\n        },\n        "Asset": {\n          "Class": "${vehicleClass}",\n          "Condition": "${vehicleCondition}",\n          "CurrentOdometerReading": "${vehicleMileage}",\n          "Identity": "${vehicleIdentity}",\n          "IdentityType": "${vehicleIdentityType}",\n          "RegistrationDate": "${vehicleRegistrationDate}",\n          "StockIdentity": ${vehicleStockIdentity},\n          "StockLocation": ${vehicleStockLocation},\n          "RegistrationMark": "${vehicleRegistrationMark}"\n        }\n      }]\n    }]\n  }`);\n}\n\nrequestQuotationFromQuotewareV3(\n  "www.ivendimotors.com",\n  "22e44ab4-02b5-4179-8d3c-bcbd92ec3a67",\n  48,\n  1000,\n  10000,\n  true,\n  false,\n  12000,\n  28000,\n  "Used",\n  "Car",\n  "CX17HHA",\n  "CX17HHA", // The vehicle VRM or CAP Code\n  "VRM", // \'VRM\' or \'RVC\' (CAP)\n  "03/03/2017",\n  null,\n  null,\n  function (quoteResult) {\n    let hirePurchaseQuotations = quoteResult.ProductGroups.find(\n      (x) => x.FacilityType == "HP"\n    );\n    let firstHirePurchaseQuotationWithoutErrors = hirePurchaseQuotations.ProductQuotes.find(\n      (x) => x.hasErrors == false\n    );\n  }\n);\n')),Object(a.b)("h3",{id:"all-together"},"All together"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx",metastring:"live",live:!0}),'<BrowserOnly>\nfunction Button() {\n  var FINANCE_CHECK_LINK =\n    "https://my.newvehicle.com/start?quoteId=#QUOTEID&imageUrl=#IMAGEURL?width=350&returnUrl=#RETURNURL&redirectTo=finance-check";\n\n  function requestQuotationFromQuotewareV3(\n    username,\n    quoteeUid,\n    term,\n    deposit,\n    annualMileage,\n    vatIncluded,\n    vatQualifying,\n    vehicleCashPrice,\n    vehicleMileage,\n    vehicleCondition,\n    vehicleClass,\n    vehicleRegistrationMark,\n    vehicleIdentity, // The vehicle VRM or CAP Code\n    vehicleIdentityType, // \'VRM\' or \'RVC\' (CAP)\n    vehicleRegistrationDate,\n    vehicleStockIdentity,\n    vehicleStockLocation,\n    quoteResultCallback\n  ) {\n    var xhr = new XMLHttpRequest();\n\n    xhr.addEventListener("readystatechange", function () {\n      if (this.readyState === 4) {\n        let quoteResults = JSON.parse(this.responseText);\n\n        for (var i = 0; i < quoteResults.QuoteResults[0].Results.length; i++) {\n          let quoteResult = quoteResults.QuoteResults[0].Results[i];\n\n          quoteResultCallback(quoteResult);\n        }\n      }\n    });\n\n    xhr.open("POST", "https://quoteware3.ivendi.com/quotes");\n    xhr.setRequestHeader("Content-Type", "application/json");\n\n    xhr.send(`{\n    "Credentials": {\n      "Username": "${username}"\n    },\n    "QuoteRequests": [{\n      "QuoteeUID": "${quoteeUid}",\n      "GlobalRequestSettings": {\n        "AllowAdjustments": true\n      },\n      "GlobalRequestParameters": {\n        "Term": "${term}"\n      },\n      "Requests": [{\n        "Figures": {\n          "Asset": {\n            "AnnualDistance": "${annualMileage}",\n            "VATIncluded": ${vatIncluded},\n            "VATQualifying": ${vatQualifying}\n          },\n          "CashDeposit": "${deposit}",\n          "CashPrice": "${vehicleCashPrice}"\n        },\n        "Asset": {\n          "Class": "${vehicleClass}",\n          "Condition": "${vehicleCondition}",\n          "CurrentOdometerReading": "${vehicleMileage}",\n          "Identity": "${vehicleIdentity}",\n          "IdentityType": "${vehicleIdentityType}",\n          "RegistrationDate": "${vehicleRegistrationDate}",\n          "StockIdentity": ${vehicleStockIdentity},\n          "StockLocation": ${vehicleStockLocation},\n          "RegistrationMark": "${vehicleRegistrationMark}"\n        }\n      }]\n    }]\n  }`);\n  }\n\n  requestQuotationFromQuotewareV3(\n    "www.ivendimotors.com",\n    "22e44ab4-02b5-4179-8d3c-bcbd92ec3a67",\n    48,\n    1000,\n    10000,\n    true,\n    false,\n    12000,\n    28000,\n    "Used",\n    "Car",\n    "CX17HHA",\n    "CX17HHA", // The vehicle VRM or CAP Code\n    "VRM", // \'VRM\' or \'RVC\' (CAP)\n    "03/03/2017",\n    null,\n    null,\n    function (quoteResult) {\n      let hirePurchaseQuotations = quoteResult.ProductGroups.find(\n        (x) => x.FacilityType == "HP"\n      );\n      let firstHirePurchaseQuotationWithoutErrors = hirePurchaseQuotations.ProductQuotes.find(\n        (x) => x.hasErrors == false\n      );\n\n      document.getElementById(\n        "customFinanceCheckButton"\n      ).href = FINANCE_CHECK_LINK.replace(\n        "#QUOTEID",\n        firstHirePurchaseQuotationWithoutErrors.QuoteUID\n      )\n        .replace("#IMAGEURL", "noimage")\n        .replace("#RETURNURL", "noreturn");\n    }\n  );\n  return (\n    <>\n      <h1>Custom Vehicle Finance Check Call to Action</h1>\n\n      <a\n        target="_blank"\n        rel="noopener noreferrer"\n        id="customFinanceCheckButton"\n        style={{\n          outline: "none",\n          border: "none",\n          display: "block",\n          color: "#FFF",\n          padding: "15px",\n          width: "auto",\n          textAlign: "center",\n          backgroundColor: "orange",\n        }}\n      >\n        Free Finance Check\n      </a>\n    </>\n  );\n}\n\n</BrowserOnly>\n')))}u.isMDXComponent=!0},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),s=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=s(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=s(n),p=o,b=d["".concat(i,".").concat(p)]||d[p]||h[p]||r;return n?a.a.createElement(b,l(l({ref:t},u),{},{components:n})):a.a.createElement(b,l({ref:t},u))}));function b(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var u=2;u<r;u++)i[u]=n[u];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);